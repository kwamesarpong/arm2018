<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <title>ARM 2018 Ghana</title>
    
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">

    <link rel="stylesheet" href="css/style.css">

</head>
<body>
    <div class="container-fluid reset-padding">

        <div class="">

            <nav class="navbar navbar-expand-md bg-dark navbar-dark">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
                  <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="collapsibleNavbar">
                  <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                          About the event
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="wordchair.html">Word From the chair</a>
                            <a class="dropdown-item" href="logistics.html">Logistics</a>
                            <a class="dropdown-item" href="themeevent.html">Theme Event</a>
                            <a class="dropdown-item" href="prearm.html">Pre-ARM</a>
                            <a class="dropdown-item" href="postarm.html">Post-ARM</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="patrons.html">Patrons & Sponsors</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="discoverkumasi.html">Discover Kumasi</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="transport.html">Transportation</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="organising.html">Organising Committee</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="visa.html">VISA</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="">Register|Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contactus.html">Contact us</a>
                    </li>
                  </ul>
                </div>  
            </nav>

            <br />

            <div class="container log-out">
                <div class="row">
                    <div class="col-md-8 text-center">
                        <!-- <div class="sub-header loading-message-div">
                            <p id="waitloading" class="loading-message"></p>
                        </div> -->
                        <button type="button" id="lodmod" class="btn btn-primary loading-modal" data-toggle="modal" data-target="#myModal">
                            Open modal
                        </button>
                    </div>
                    <div class="col-md-4 text-right">
                        <button onclick="event.preventDefault(); logOut();">Log out</button>
                    </div>
                </div>
            </div>

            <br /><br />

            <div class="container">
                <div class="regform-card">
                    <div class="regform-card-title">
                        <h4 class="sub-header">ARM 2018 Ghana Registration Form</h4>
                    </div>
                    <div class="regform-padding">
                        <p>Event Details</p>
                        <div class="progress sec-progress">
                            <div class="progress-bar sec-progress-bar"></div>
                        </div>
                        <br />
                        <br />
                        <div class="signup-form">

                            <form onsubmit="event.preventDefault(); submitUpdatedData();">
                                <div class="row">
                                    <div class="col-md-6">
                                        <br />
                                        <h6 class="sub-header">National Member Organization (NMO)</h6>
                                        <p class="sub-header">
                                            <select name="nmo" id="nmo" required>
                                                <option value="">Select one</option>
                                                <option value="ABEM -  Burundi">ABEM -  Burundi</option>
                                                <option value="AEMP - Togo">AEMP - Togo</option>
                                                <option value="AEM -  Burkina Faso">AEM -  Burkina Faso</option>
                                                <option value="AEM -  Guinea">AEM -  Guinea</option>
                                                <option value="APS- Mali">APS- Mali</option>
                                                <option value="CAMSA - Cameroun">CAMSA - Cameroun</option>
                                                <option value="EMSA -  Ethiopia">EMSA -  Ethiopia</option>
                                                <option value="FNESS - Senegal">FNESS - Senegal</option>
                                                <option value="FUMSA - Uganda">FUMSA - Uganda</option>
                                                <option value="LMSA - Lesotho">LMSA - Lesotho</option>
                                                <option value="MEDSAR - Rwanda">MEDSAR - Rwanda</option>
                                                <option value="MedSin - Sudan">MedSin - Sudan</option>
                                                <option value="MESENA - Namibia">MESENA - Namibia</option>
                                                <option value="MSA-DRC - Congo">MSA-DRC - Congo</option>
                                                <option value="MSAKE - Kenya">MSAKE - Kenya</option>
                                                <option value="NIMSA - Nigeria">NIMSA - Nigeria</option>
                                                <option value="SAMSA - South Africa">SAMSA - South Africa</option>
                                                <option value="SLEMSA - Sierra Leone">SLEMSA - Sierra Leone</option>
                                                <option value="TAMSA - Tanzania">TAMSA - Tanzania</option>
                                                <option value="UMMSA - Malawi">UMMSA - Malawi</option>
                                                <option value="UniGaMSA - Gambia">UniGaMSA - Gambia</option>
                                                <option value="ZIMSA - Zimbabwe">ZIMSA - Zimbabwe</option>
                                                <option value="Other">Other</option>
                                            </select>
                                        </p>
                                        <br />
                                    </div>

                                    <div class="col-md-6">
                                        <br />
                                        <h6 class="sub-header">If your NMO is not listed, please state yours here</h6>
                                        <p class="sub-header"><input type="text" id="statenmo" name="stateNMO" /></p>
                                        <br />
                                    </div>

                                    <div class="col-md-6">
                                        <br />
                                        <h6 class="sub-header">Participation Status</h6>
                                        <p class="sub-header">
                                            <select name="participationstatus" id="participationstatus" required>
                                                <option value="">Select one</option>
                                                <option value="Alumnus">Alumnus</option>
                                                <option value="General Delegate">General Delegate</option>
                                                <option value="IFMSA Official">IFMSA Official</option>
                                                <option value="International Assistant">International Assistant</option>
                                                <option value="MM 19 OC representative">MM 19 OC representative</option>
                                                <option value="Observer">Observer</option>
                                                <option value="Program Representative">Program Representative</option>
                                                <option value="Regional Team">Regional Team</option>
                                                <option value="Support Persons">Support Persons</option>
                                                <option value="Task Force Representative">Task Force Representative</option>
                                                
                                                
                                            </select>
                                        </p>
                                        <br />
                                    </div>

                                    <div class="col-md-6">
                                        <br />
                                        <h6 class="sub-header">Which session will you attend?</h6>
                                        <p class="sub-header">
                                            <select name="attendsession" id="attendsession" required>
                                                <option value="">Select one</option>
                                                <option value="Presidents’ Sessions">Presidents’ Sessions</option>
                                                <option value="NMO Management Sessions">NMO Management Sessions</option>
                                                <option value="SCOME (Medical Education)">SCOME (Medical Education)</option>
                                                <option value="SCORE (professional Exchange)">SCORE (professional Exchange)</option>
                                                <option value="SCOPE ( professional Exchange)">SCOPE ( professional Exchange)</option>
                                                <option value="SCORA ( Sexual & Reproductive Health including HIV/AIDS)">SCORA ( Sexual & Reproductive Health including HIV/AIDS)</option>
                                                <option value="SCOPH ( public Health)">SCOPH ( public Health)</option>
                                                <option value="SCORP ( Human Rights & Peace)">SCORP ( Human Rights & Peace)</option>
                                                <option value="Alumni">Alumni</option>
                                            </select>
                                        </p>
                                        <br />
                                    </div>

                                    <div class="col-md-6">
                                        <br />
                                        <h6 class="sub-header">Position in your NMO</h6>
                                        <p class="sub-header">
                                            <select name="nmoposition" id="nmoposition" required>
                                                <option value="">Select one</option>
                                                <option value="I am on the IFMSA International Team of Officials">I am on the IFMSA International Team of Officials</option>
                                                <option value="NMO President (National President)">NMO President (National President)</option>
                                                <option value="NOME (National Officer on Medical Education)">NOME (National Officer on Medical Education)</option>
                                                <option value="NEO (National Officer for Professional Exchanges)">NEO (National Officer for Professional Exchanges)</option>
                                                <option value="NPO (National Officer on Public Health)">NPO (National Officer on Public Health)</option>
                                                <option value="NORA (National Officer on Sexual & Reproductive Health including HIV/AIDS)">NORA (National Officer on Sexual & Reproductive Health including HIV/AIDS)</option>
                                                <option value="NORE (National Officer on Human Rights and Peace)">NORE (National Officer on Human Rights and Peace)</option>
                                                <option value="Other National Board member position">Other National Board member position</option>
                                                <option value="Local Officer">Local Officer</option>
                                                <option value="Alumnus">Alumnus</option>
                                                <option value="General Member">General Member</option>
                                            </select>
                                        </p>
                                        <br />
                                    </div>

                                    <div class="col-md-6">
                                        <br />
                                        <h6 class="sub-header">Do you plan on attending the pre-ARM?</h6>
                                        <p class="sub-header">
                                            <label class="switch">
                                              <input type="checkbox" name="prearmattendance" id="prearmattendance" onchange="preArm()" />
                                              <span class="slider round"></span>
                                            </label>
                                        </p>
                                        <br />
                                    </div>

                                    <div class="col-md-6">
                                        <br />
                                        <h6 class="sub-header">Do you plan on attending the post-ARM?</h6>
                                        <p class="sub-header">
                                            <label class="switch">
                                              <input type="checkbox" name="postarmattendance" id="postarmattendance" onchange="postArm()" />
                                              <span class="slider round"></span>
                                            </label>
                                        </p>
                                        <br />
                                    </div>

                                </div>
                                <br /><br />

                                <div class="row">
                                    <div class="col-md-6 text-center">
                                        <div class="sub-header fail-color" id="returnError"></div>
                                    </div>
                                    <div class="col-md-3 text-center previous-page-padd">
                                        <!-- <button class="sub-header">Previous Page</button> -->
                                        <a href="firstform.html" class="sub-header next-page-link">Previous Page</a>
                                    </div>
                                    <div class="col-md-3">
                                        <button type="submit" class="sub-header">Next Page</button>
                                        <!-- <a href="thirdform.html" class="sub-header next-page-link">Next Page</a> -->
                                    </div>
                                </div>
                            </form>

                        </div>
                        
                    </div>
                </div>
            </div>
            
        </div>

        <br /><br /><br />

        
            <div class="footer">
                <div class="row">
                    <div class="col-md-12 text-center">
                        <p class="sub-header">Copyright &copy; 2018 FGMSA-GHANA</p>
                    </div>
                </div>
            </div>

            <!-- The Modal -->
            <div class="modal fade modal-position" id="myModal">
                <div class="modal-dialog">
                <div class="modal-content">
                    
                    <!-- Modal body -->
                    <div class="modal-body text-center">
                        <p class="sub-header modal-body-padd">Please wait ...</p>
                        <button type="button" id="closeMod" class="btn btn-danger loading-modal" data-dismiss="modal">Close</button>
                    </div>
                    
                </div>
                </div>
            </div>
        

    </div>
    

    <script src="https://fgmsa.herokuapp.com/js/devless-sdk.js" class="devless-connection" devless-con-token="13cb9695a2e39140de7895dda9a24e24"  ></script>

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>

    <script type="text/javascript">
        window.onload = checkStatus;

        $(function () {
            $(":file").change(function () {
                if (this.files && this.files[0]) {
                    var reader = new FileReader();
                    reader.onload = imageIsLoaded;
                    reader.readAsDataURL(this.files[0]);
                }
            });
        });

        function imageIsLoaded(e) {
            $('#myImg').attr('src', e.target.result);
        };

        function preArm() {
            var x = document.getElementById("prearmattendance");
            if (x.checked === true) {
                x.value = "yes";
            } else {
                x.value = "no";
            }
        };

        function postArm() {
            var y = document.getElementById("postarmattendance");
            if (y.checked === true) {
                y.value = "yes";
            } else {
                y.value = "no";
            }
        };

        function logOut() {
            localStorage.removeItem('userToken');
            localStorage.removeItem('userEmail');
            window.location.href = "/login.html";
        };

        function checkStatus() {
            var userToken = localStorage.getItem('userToken');
            var userEmail = localStorage.getItem('userEmail');

            if (!userToken && !userEmail) {
                window.location.href = "/login.html";
            }
            else {

                document.getElementById("lodmod").click();

                params={
                    where:["email," + userEmail]
                };

                SDK.queryData("conferenceForm", "secondform", params, function(response){
                    console.log(response);

                    document.getElementById("nmo").value = response.payload.results[0].nmo;
                    document.getElementById("statenmo").value = response.payload.results[0].statenmo;
                    document.getElementById("participationstatus").value = response.payload.results[0].participationstatus;
                    document.getElementById("attendsession").value = response.payload.results[0].attendsession;
                    document.getElementById("nmoposition").value = response.payload.results[0].nmoposition;

                    if(response.payload.results[0].prearmattendance === 'yes') {
                        document.getElementById("prearmattendance").checked === true;
                    }
                    else {
                        document.getElementById("prearmattendance").checked === false;
                    }

                    if(response.payload.results[0].postarmattendance === 'yes') {
                        document.getElementById("postarmattendance").checked === true;
                    }
                    else {
                        document.getElementById("postarmattendance").checked === false;
                    }

                    document.getElementById("closeMod").click();
                });
            }

        };

        function submitUpdatedData() {

            document.getElementById("lodmod").click();

            var nmo = document.getElementById("nmo").value;
            var statenmo = document.getElementById("statenmo").value;
            var participationstatus = document.getElementById("participationstatus").value;
            var attendsession = document.getElementById("attendsession").value;
            var nmoposition = document.getElementById("nmoposition").value;
            var prearmattendance = document.getElementById("prearmattendance").value;
            var postarmattendance = document.getElementById("postarmattendance").value;

            var obtainedEmail = localStorage.getItem('userEmail');
            
            data = {
                "nmo": nmo,
                "statenmo": statenmo,
                "participationstatus": participationstatus,
                "attendsession": attendsession,
                "nmoposition": nmoposition,
                "prearmattendance": prearmattendance,
                "postarmattendance": postarmattendance
            }
            
            SDK.updateData("conferenceForm", "secondform", "email", obtainedEmail, data,
                function(response) {
                    console.log(response);
                    if (response.status_code === 619) {
                        window.location.href = "/thirdform.html";
                    }
                    else {
                        document.getElementById("closeMod").click();
                        document.getElementById("returnError").innerHTML = "Cannot save details at this time. Please try later!";
                    }
                });

        }
    </script>
</body>

</html>